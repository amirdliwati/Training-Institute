$(function(){updateICDLCardList(),$("#create-icdl-card-btn").on("click",function(){$("#createICDLCardModal").modal("show"),$.ajax({url:getICDLCardCreateFormURL,type:"GET",success:function(a){$("#createICDLCardModal .modal-body").html(a)},error:function(){},beforeSend:function(){$("#createICDLCardModal .modal-body").html("الرجاء الانتظار ..."),$("#createICDLCardModal").modal("show")}})})});var updateICDLCardList=function(){$('[data-toggle="tooltip"]').tooltip(),$(".edit-icdl-card-link").on("click",function(){$.ajax({url:getICDLCardUpdateFormURL,type:"GET",data:{id:$(this).attr("data-id")},success:function(a){$("#updateICDLCardModal .modal-body").html(a)},error:function(){},beforeSend:function(){$("#updateICDLCardModal .modal-body").html("الرجاء الانتظار ..."),$("#updateICDLCardModal").modal("show")}})}),$(".delete-icdl-card-link").on("click",function(){confirm("هل انت متأكد من انك تريد حذف البطاقة؟")&&$.ajax({url:ICDLCardDeleteURL,type:"POST",dataType:"json",data:{id:$(this).attr("data-id")},success:function(a){$("#pleaseWaitModal").modal("hide"),a.status&&(vex.defaultOptions.className="vex-theme-plain",vex.dialog.alert(a.message),$.fn.yiiGridView.update("icdl-card-grid",{data:$("#search-form-container form").serialize()}))},error:function(){$("#pleaseWaitModal").modal("hide")},beforeSend:function(){$("#pleaseWaitModal .modal-body").html("الرجاء الانتظار ..."),$("#pleaseWaitModal").modal("show")}})}),$(".show-icdl-card-link").on("click",function(){$.ajax({url:getICDLCardDetailsURL,type:"GET",data:{id:$(this).attr("data-id")},success:function(a){$("#pleaseWaitModal").modal("hide"),$("#search-form-container").hide(),$("#icdl-card-grid").hide(),$("#icdl-card-detail-container").html(a),updateICDLCardDetailsLinks(),$("#icdl-card-detail-container").show()},error:function(){$("#pleaseWaitModal").modal("hide")},beforeSend:function(){$("#pleaseWaitModal .modal-body").html("الرجاء الانتظار ..."),$("#pleaseWaitModal").modal("show")}})})},updateICDLCardDetailsLinks=function(){$(".back").on("click",function(){$("#icdl-card-grid").show(),$("#icdl-card-detail-container").hide()}),$(".create-icdl-ticket").on("click",function(){$.ajax({url:getICDLTicketCreateFormURL,type:"GET",data:{id:$("#icdl-card-id").val()},success:function(a){$("#pleaseWaitModal").modal("hide"),$("#createICDLTicketModal .modal-body").html(a),$("#createICDLTicketModal").modal("show")},error:function(){$("#pleaseWaitModal").modal("hide")},beforeSend:function(){$("#pleaseWaitModal .modal-body").html("الرجاء الانتظار ..."),$("#pleaseWaitModal").modal("show")}})}),updateICDLTicketListLinks()},updateICDLCardTicketList=function(){$.ajax({url:getTicketListURL,type:"GET",data:{id:$("#icdl-card-id").val()},success:function(a){$(".ticket-list-container").html(a),$("#pleaseWaitModal").modal("hide"),updateICDLTicketListLinks()},error:function(){$("#pleaseWaitModal").modal("hide")},beforeSend:function(){$("#pleaseWaitModal .modal-body").html("الرجاء الانتظار ..."),$("#pleaseWaitModal").modal("show")}})},updateICDLTicketListLinks=function(){$(".delete-icdl-ticket-link").tooltip(),$(".update-icdl-ticket-link").tooltip(),$(".update-icdl-ticket-link").on("click",function(){$.ajax({url:getICDLTicketUpdateFormURL,type:"GET",data:{id:$(this).attr("data-id")},success:function(a){$("#updateICDLTicketModal .modal-body").html(a)},error:function(){},beforeSend:function(){$("#updateICDLTicketModal .modal-body").html("الرجاء الانتظار ..."),$("#updateICDLTicketModal").modal("show")}})}),$(".delete-icdl-ticket-link").on("click",function(){confirm("هل انت متاكد من انك تريد حذف التذكرة؟")&&$.ajax({url:iCDLTicketDelete,type:"POST",dataType:"json",data:{id:$(this).attr("data-id")},success:function(a){$("#pleaseWaitModal").modal("hide"),a.status&&(vex.defaultOptions.className="vex-theme-plain",vex.dialog.alert(a.message),updateICDLCardTicketList())},error:function(){$("#pleaseWaitModal").modal("hide")},beforeSend:function(){$("#pleaseWaitModal .modal-body").html("الرجاء الانتظار ...")}})})};